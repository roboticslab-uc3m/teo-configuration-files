<?xml version="1.0" encoding="UTF-8"?>

<device name="broker" type="CanBusBroker" xmlns:xi="http://www.w3.org/2001/XInclude">

    <xi:include href="./brokers/common.xml" />

    <paramlist name="buses">
        <xi:include href="./includes/leftArmBus.xml" enabled_by="leftArm" />
        <xi:include href="./includes/rightArmBus.xml" enabled_by="rightArm" />
        <xi:include href="./includes/leftLegBus.xml" enabled_by="leftLeg trunk" />
        <xi:include href="./includes/rightLegBus.xml" enabled_by="rightLeg trunk" />
    </paramlist>

    <action phase="startup" level="10" type="attach">
        <paramlist name="networks">
            <!-- buses -->
            <elem name="rightArm">can2</elem>
            <elem name="leftArm" >can3</elem>
            <!-- driver nodes -->
            <xi:include href="./includes/leftArmNodes.xml" enabled_by="leftArm" />
            <!-- sensor nodes -->
            <elem name="FTRH">ID33</elem>
        </paramlist>
    </action>

    <action phase="shutdown" level="50" type="detach" />

</device>
